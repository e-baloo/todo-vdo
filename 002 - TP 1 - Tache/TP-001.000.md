# 🧠 Chapitre 1 : Modélisation des Données

**🎯 Objectifs pédagogiques**
À la fin de ce chapitre, l’élève sera capable de :

Identifier les entités principales d’une application "gestionnaire de tâches"

Traduire un modèle conceptuel en schéma de données MongoDB avec Mongoose

Préparer la structure de données nécessaire pour la suite du projet

## 📝 1.1 – Analyse des Entités

**🧩 Entité User**

Un utilisateur peut :

S’inscrire / se connecter

Créer, modifier, supprimer ses propres tâches

Attributs :
- id
- name
- email
- password (stocké sous forme hashée)

**🧩 Entité Task**

Une tâche contient :
- id
- title
- description
- dueDate (échéance)
- status (à faire / en cours / terminé)
- userId (référence vers l’utilisateur propriétaire)

## 🧮 1.2 – Modèle Conceptuel (MCD simplifié)
text
Copier
Modifier
User (1) -------- (∞) Task

User :
- id: ObjectId
- name: string
- email: string
- password: string

Task :
- id: ObjectId
- title: string
- description: string
- dueDate: Date
- status: 'todo' | 'in_progress' | 'done'
- userId: ObjectId (référence à User)


## 📦 1.3 – Définition des modèles avec Mongoose
Dans le dossier src/users, crée le fichier suivant :

📁 src/users/schemas/user.schema.ts
```typescript
import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';
import { Document } from 'mongoose';

export type UserDocument = User & Document;

@Schema()
export class User {
  @Prop({ required: true })
  name: string;

  @Prop({ required: true, unique: true })
  email: string;

  @Prop({ required: true })
  password: string; // hashé avec bcrypt plus tard
}

export const UserSchema = SchemaFactory.createForClass(User);
```

Dans le dossier src/tasks, crée :

📁 src/tasks/schemas/task.schema.ts
```typescript
import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';
import { Document, Types } from 'mongoose';
import { User } from '../../users/schemas/user.schema';

export type TaskDocument = Task & Document;

@Schema({ timestamps: true }) // auto ajoute createdAt / updatedAt
export class Task {
  @Prop({ required: true })
  title: string;

  @Prop()
  description: string;

  @Prop()
  dueDate: Date;

  @Prop({ enum: ['todo', 'in_progress', 'done'], default: 'todo' })
  status: string;

  @Prop({ type: Types.ObjectId, ref: 'User', required: true })
  userId: Types.ObjectId;
}

export const TaskSchema = SchemaFactory.createForClass(Task);
```

## 🧪 1.4 – Étapes pratiques à faire faire aux élèves
Exercice 1 : Analyse des besoins
Lister les entités et attributs d’un gestionnaire de tâches

Modéliser un MCD simple (papier ou outil en ligne)

Exercice 2 : Création des schémas
Implémenter les deux schémas Mongoose (User et Task)

Ajouter une contrainte de référence avec userId dans Task

## 🧰 1.5 – Préparation pour l’intégration
Dans le prochain chapitre (MongoDB + Mongoose), les élèves :

Importeront ces schémas dans les modules NestJS

Feront les premiers tests avec des services pour insérer/consulter les données